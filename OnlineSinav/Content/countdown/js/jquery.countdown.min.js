var createDigits=function(t,e){var i,n,r=0;digits=[],intervals=[];for(var a=0;a<e.startTime.length;a++){if(parseInt(e.startTime[a])>=0){if(elem=$('<div id="cnt_'+r+'" class="cntDigit" />').css({height:e.digitHeight,"float":"left",background:"url('"+e.image+"')",width:e.digitWidth}),elem.current=parseInt(e.startTime[a]),digits.push(elem),margin(r,-elem.current*e.digitHeight*e.digitImages),e.continuous===!0)digits[r]._max=function(){return 9};else switch(e.format[a]){case"h":digits[r]._max=function(t,e){return t%2==0?2:e?3:9};break;case"d":digits[r]._max=function(){return 9};break;case"m":digits[r]._max=function(t){return i||(i=t),t==i?9:5};break;case"s":digits[r]._max=function(t){return n||(n=t),t==n?9:5}}r+=1}else elem=$('<div class="cntSeparator"/>').css({"float":"left"}).text(e.startTime[a]);t.append(elem)}},makeMovement=function(t,e,i,n){intervals[t]&&window.clearInterval(intervals[t]);var r=-(n.digitHeight*n.digitImages*digits[t].current);margin(t,r),digits[t].current=digits[t].current+(i?e:-e);var a=0;intervals[t]=setInterval(function(){if(a++===n.digitImages*e)return window.clearInterval(intervals[t]),void delete intervals[t];var s=i?-n.digitHeight:n.digitHeight;margin(t,r+a*s)},n.stepTime/e)},margin=function(t,e){return void 0!==e?(digits[t].margin=e,digits[t].css({backgroundPosition:"0 "+e+"px"})):digits[t].margin||0},moveDigit=function(t,e){if(0!=digits[t].current)makeMovement(t,1,!1,e);else if(t>0){var i=0==digits[t-1].current;makeMovement(t,digits[t]._max(t,i),!0,e),moveDigit(t-1,e)}else{for(var n=0;n<digits.length;n++)clearInterval(intervals[n]),clearInterval(intervals.main),margin(n,0);e.timerEnd()}},parseRelativeDate=function(t,e){var i,n,r=new Date,a=r.getDate(),s=r.getMonth()+1,d=r.getFullYear(),g=r.getHours(),m=e.format,o=t.split(":");return 0==m.indexOf("dd")&&(a=o[0],o=o.slice(1),m=m.substr(3)),0==m.indexOf("hh")&&(g=o[0],o=o.slice(1),m=m.substr(3)),0==m.indexOf("mm")&&(i=o[0],o=o.slice(1),m=m.substr(3)),0==m.indexOf("ss")&&(n=o[0],o=o.slice(1),m=m.substr(3)),new Date([s,a,d].join("/")+" "+[g,i,n].map(pad).join(":")+" GMT-0900")},formatCompute=function(t,e){var i=e.format,n={d:Math.floor((t-new Date(t.getFullYear(),0,1))/864e5),h:t.getUTCHours(),m:t.getUTCMinutes(),s:t.getUTCSeconds()};return i.replace(/(dd|hh|mm|ss)/g,function(t,e){return pad(n[e[0]])})},pad=function(t){return(1e15+""+t).slice(-2)},start=function(t){"true"!=t.attr("started")&&(t.attr("started",!0),intervals.main=setInterval(function(){moveDigit(digits.length-1,t.data("options"))},1e3))},digits=[],intervals=[];jQuery.fn.countdown=function(t){var e={stepTime:60,format:"dd:hh:mm:ss",startTime:"01:12:32:55",digitImages:6,digitWidth:67,digitHeight:90,timerEnd:function(){},image:"digits.png",continuous:!1,start:!0};if($.extend(e,t),t.endTime){var i=t.endTime instanceof Date?t.endTime:parseRelativeDate(t.endTime,e),n=i.getTime()-(new Date).getTime();t.startTime=formatCompute(new Date(n),e),delete t.endTime}$.extend(e,t),this.length&&(clearInterval(intervals.main),createDigits(this,e),this.data("options",e),e.start===!0&&start(this))},jQuery.fn.start=function(){start(this)};